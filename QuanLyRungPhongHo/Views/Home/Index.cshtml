@using Microsoft.AspNetCore.Mvc.Localization
@inject IViewLocalizer Localizer
@model QuanLyRungPhongHo.Models.HomeViewModel

@{
    ViewData["Title"] = Localizer["HomeTitle"];
}


<!-- Banner Chào Mừng -->
<div class="welcome-banner mb-4 p-4 bg-success bg-gradient text-white rounded shadow">
    <div class="d-flex align-items-center justify-content-between">
        <div>
            <h2 class="mb-1">
                <i class="bi bi-house-heart"></i>
                @Localizer["Hello"], <strong>@Model.HoTen</strong>
            </h2>
            <p class="mb-0">
                <i class="bi bi-briefcase"></i> @Model.ChucVu |
                <i class="bi bi-shield-check"></i> @Model.Quyen |
                <i class="bi bi-calendar-check"></i> @DateTime.Now.ToString("dd/MM/yyyy HH:mm")
            </p>
        </div>
        <div class="text-end">
            <i class="bi bi-tree" style="font-size: 4rem; opacity: 0.3;"></i>
        </div>
    </div>
</div>

<!-- Tổng Quan -->
<h4 class="mb-3">
    <i class="bi bi-bar-chart-fill"></i> @Localizer["QuickOverview"]
</h4>

<div class="row g-4 mb-4">
    <!-- Tổng Diện Tích -->
    <div class="col-xl-3 col-lg-6 col-md-6">
        <div class="card border-0 shadow-sm h-100">
            <div class="card-body text-center py-4">
                <div class="mb-3">
                    <i class="bi bi-geo-alt-fill text-success" style="font-size: 3rem;"></i>
                </div>
                <h2 class="mb-0 fw-bold text-success">@Model.TongDienTich.ToString("N2")</h2>
                <p class="text-muted mb-0 mt-2">@Localizer["TotalArea"] (ha)</p>
            </div>
        </div>
    </div>

    <!-- Số Lô Rừng -->
    <div class="col-xl-3 col-lg-6 col-md-6">
        <div class="card border-0 shadow-sm h-100">
            <div class="card-body text-center py-4">
                <div class="mb-3">
                    <i class="bi bi-grid-3x3-gap-fill text-primary" style="font-size: 3rem;"></i>
                </div>
                <h2 class="mb-0 fw-bold text-primary">@Model.TongSoLoRung</h2>
                <p class="text-muted mb-0 mt-2">@Localizer["ForestLots"]</p>
            </div>
        </div>
    </div>

    <!-- Số Nhân Sự -->
    <div class="col-xl-3 col-lg-6 col-md-6">
        <div class="card border-0 shadow-sm h-100">
            <div class="card-body text-center py-4">
                <div class="mb-3">
                    <i class="bi bi-people-fill text-info" style="font-size: 3rem;"></i>
                </div>
                <h2 class="mb-0 fw-bold text-info">@Model.TongSoNhanSu</h2>
                <p class="text-muted mb-0 mt-2">@Localizer["SecurityStaff"]</p>
            </div>
        </div>
    </div>

    <!-- Cảnh Báo 7 Ngày -->
    <div class="col-xl-3 col-lg-6 col-md-6">
        <div class="card border-danger shadow h-100" style="border-width: 3px !important;">
            <div class="card-body text-center py-4">
                <div class="mb-3">
                    <i class="bi bi-exclamation-triangle-fill text-danger" style="font-size: 3rem;"></i>
                </div>
                <h2 class="mb-0 fw-bold text-danger">@Model.SoCanhBao7Ngay</h2>
                <p class="text-muted mb-0 mt-2">@Localizer["Alert7Days"]</p>
            </div>
        </div>
    </div>
</div>

<!-- CẢNH BÁO KHẨN CẤP -->
<div class="row mb-4">
    <div class="col-12">
        <div class="card border-0 shadow-sm">
            <div class="card-header bg-danger py-3" style="background-color: #dc3545 !important; color: #ffffff !important;">
                <h5 class="mb-0" style="color: #ffffff !important;">
                    <i class="bi bi-bell-fill"></i>
                    @Localizer["EmergencyAlert"]
                    <span class="badge bg-white text-danger ms-2">@Model.DanhSachCanhBao.Count</span>
                </h5>
            </div>
            <div class="card-body p-0">
                @if (Model.DanhSachCanhBao.Any())
                {
                    <div class="table-responsive">
                        <table class="table table-hover mb-0">
                            <thead style="background-color: #dc3545 !important;">
                                <tr>
                                    <th width="5%" style="color: #ffffff !important;"></th>
                                    <th width="15%" style="color: #ffffff !important;">@Localizer["Time"]</th>
                                    <th width="15%" style="color: #ffffff !important;">@Localizer["EventType"]</th>
                                    <th width="30%" style="color: #ffffff !important;">@Localizer["Content"]</th>
                                    <th width="15%" style="color: #ffffff !important;">@Localizer["Location"]</th>
                                    <th width="10%" style="color: #ffffff !important;">@Localizer["Commune"]</th>
                                    <th width="10%" style="color: #ffffff !important;">@Localizer["Reporter"]</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in Model.DanhSachCanhBao)
                                {
                                    <tr>
                                        <td class="text-center">
                                            <i class="bi bi-circle-fill text-@item.MucDoClass"></i>
                                        </td>
                                        <td><small>@item.NgayGhi.ToString("dd/MM/yyyy HH:mm")</small></td>
                                        <td><span class="badge bg-@item.MucDoClass">@item.LoaiSuViec</span></td>
                                        <td>
                                            <small>
                                                @(item.NoiDung?.Length > 50
                                                                                        ? item.NoiDung.Substring(0, 50) + "..."
                                                                                        : item.NoiDung)
                                    </small>
                                </td>
                                <td><small>@item.ViTri</small></td>
                                <td><small>@item.TenXa</small></td>
                                <td><small>@item.NguoiGhiNhan</small></td>
                            </tr>
                                                        }
                            </tbody>
                        </table>
                    </div>
                }
                else
                {
                    <div class="p-4 text-center text-muted">
                        <i class="bi bi-check-circle" style="font-size: 3rem;"></i>
                        <p class="mt-2">@Localizer["NoEmergencyAlert"]</p>
                    </div>
                }
            </div>
        </div>
    </div>
</div>

<style>
    .welcome-banner {
        background: linear-gradient(135deg, #2d7a4e 0%, #4caf50 100%);
    }

    .card {
        transition: transform 0.2s, box-shadow 0.2s;
    }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.15) !important;
        }

    .card-body h2 {
        font-size: 2.5rem;
    }

    .table-hover tbody tr:hover {
        background-color: #f8f9fa;
        cursor: pointer;
    }

    .timeline-item {
        position: relative;
        padding-left: 0;
    }

    .timeline-marker {
        font-size: 0.8rem;
    }
</style>


